
<!doctype html>
<html lang="he">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>reveal.js Math-Project</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/theme/custom.css">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css">

	<!-- Personalizing font-->
	<!-- Noto Sans Hebrew font-->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew:wght@100..900&display=swap" rel="stylesheet">

</head>
<body dir="rtl" style="text-align:right;">
	<img class="Background-theme" src="Math-Project/main-theme.png" />
	<div class="reveal">
		<div class="slides">
			<!-- Slide 1 index=0-->
			<section id="intro-slide"
					 data-background-image="Math-Project/theme-opening.png"
					 style="display: flex;
								flex-direction:column;
								align-items:center;
								justify-content: center;
								margin-right:70px;"
					 class="Slide1"
					 data-transition="wipe"
					 data-state="animate-paragraph">
				<!-- slide1 Title-->
				<div style="width: 500px;
								padding-top: 145px;
								padding-bottom:85px;
								margin-right:350px;
								justify-content: center;"
					 class="header">
					<h2 style="font-size: 75px !important;"> המבנה העשרוני </h2>
				</div>
				<!-- continue click-->
				<div>
					<!-- linked to slide2: index=1-->
					<a onclick="playTapAndGo(1)" id="delayed-fragment" class="continue-button delayed-p"
					   style=" display: flex; margin-top: 230px; margin-right: 400px; width: 400px; justify-content: center; text-align: center; cursor: pointer;">
						לחץ כּאן כּדי להמשיך
					</a>
				</div>
			</section>

			<!-- Slide 2 index=1-->
			<section class="Slide2">
				<div class="header glow-underline delayed-p" style="width: 60%;">
					<h3 class="delayed-p" style="font-size: 75px !important;"> הוראות המשחק </h3>
				</div>
				<!-- Slide2 fragments-->
				<ul style="text-align:right;">
					<li class="delayed-p"
						style="animation-delay: 3s;
						    margin-bottom: 20px;
						    margin-top: 15px;
							padding-top:15px;">
						במשחק זה עליך לבחור את המספר העשרוני הגדול בין שני המספרים המופיעים על המסך.
					</li>
					<li class="delayed-p" style="animation-delay: 5s; padding-top:10px;">
						עליך לעבור בהצלחה את ההדרכה על מנת להתחיל את המשחק.
					</li>
				</ul>
				<div>
					<!-- linked to slide3: index=2-->
					<a onclick="playTapAndGo(2)"
					   id="delayed-fragment"
					   class="continue-button delayed-p"
					   style=" display: flex; margin-top: 150px; margin-right: 250px; width: 400px; justify-content: center; text-align: center; cursor: pointer; animation-delay: 6s;">
						לחץ כּאן כּדי להמשיך
					</a>
				</div>
			</section>

			<!-- Slide 3 index=2-->
			<section id="slide3">
				<div class="delayed-p glow-underline"
					 style="
						display: flex;
						flex-shrink:1;
						margin-top: 90px;
						animation-delay: 2s;
						margin-right: -60px;
						font-size:60px;
						position:absolute;
						flex-wrap: wrap;
						width: 150%;
						right: -17%;
						animation-delay:0s;">
					בחר את המספר הגדול מבין שני המספרים הבאים:
				</div>
				<div style="display: flex;
								gap:80px;
								justify-content:space-between;
								margin:270px -70px 300px 300px;
								width: 1200px;
								height:300px;
								flex-wrap:wrap;">
					<a href="#/4" class="delayed-p answer" style="cursor:pointer; color:white; animation-delay:2s;"> 0.25 </a>
					<a href="#/3" class="delayed-p answer" style="cursor:pointer; color:white; animation-delay: 2s"> 0.3 </a>
				</div>
			</section>

			<!-- Slide 4 index=3 -->
			<section id="s4" style="display: flex; flex-direction:column; justify-content: center; align-items: center; height:100%; width:100%; text-align:center;">
				<div class="feedback-centering">
					<div class="ansFeedback"> נכון </div>
				</div>
				<div class="composition-next">
					<p style="margin:0; color:mediumorchid;"> בוא נפרק כל מספר </p>
					<a onclick="playTapAndGo(5)" style="cursor:pointer; color:white;">  לחץ כאן כדי להמשיך </a>
				</div>
			</section>

			<!-- Slide 5 index=4 -->
			<section id="s5" style="display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%; width: 100%; text-align: center;">
				<div class="feedback-centering">
					<div class="ansFeedback"> לא נכון   </div>
				</div>
				<div class="composition-next">
					<p style="margin:0; color:mediumorchid;"> בוא נפרק כל מספר </p>
					<!--if we click, forward to slide-index=5-->
					<a onclick="playTapAndGo(5)" style="cursor:pointer; color:white;">  לחץ כאן כדי להמשיך </a>
				</div>
			</section>

			<!-- Slide 6 index=5-->
			<section>
				<div class="fragment grow"
					 style="
					display: flex;
					flex-shrink:1;
					margin-top: 90px;
					animation-delay: 2s;
					margin-right: -60px;
					font-size:40px;
					position:absolute;
					flex-wrap: wrap;
					width: 103%;">
					<p>בוא נפרק את שני המספרים שבשאלה.</p>
					<p>בחר את המספר שתרצה לפרק:</p>
				</div>
				<div style="display: flex;
						gap:80px;
						justify-content:space-between;
						margin:270px -70px 300px 300px;
						width: 1200px;
						height:300px;
						flex-wrap:wrap;">
					<a onclick="playTapAndGo(6)" class="answer" style="cursor:pointer; color:white"> 0.25 </a>
					<a onclick="playTapAndGo(7)" class="answer" style="cursor:pointer; color:white;"> 0.3 </a>
				</div>
			</section>

			<!-- Slide 7 index=6 -->
			<section id="num-house-slide" data-transition="fade">
				<img src="Math-Project/numbers-house.png" alt="House" class="house-background">

				<!-- Text conten above image-->
				<div class="house-content">
					<!-- Title -->
					<div class="delayed-p" data-fragment-index="1"
						 style=" display: inline-block; max-width:90vw; width:1100px; position:absolute; color: #5C469C; background-color: #FFEB88; top: 5%; left: 75%; transform: translateX(-50%);  padding: 15px 20px; border-radius:20px; text-align:right; font-size:40px; ">
						בוא נסתכל על מבנה המספר העשרוני בעזרת בית המספרים:
					</div>

					<!-- Main explanation -->
					<div class="delayed-p" id="main-explanation"
						 data-fragment-index="2"
						 style="position:relative; margin-top:270px; margin-left:50px; animation-delay:2s;">
						כל מספר עשרוני מורכב מ:
					</div>
					<!-- Decimal nummber components-->
					<div class="delayed-p" data-fragment-index="3" style="animation-delay:5s;">
						<div style=" position: absolute; top: 105%; left: 10%; padding: 20px; border-radius: 15px; font-size: 28px; color: #4B4B4B;">
							החלק השלם
						</div>
						<div style=" position: absolute; top: 148%; left: 26.5%; padding: 20px; border-radius: 15px; font-size: 28px; color: #4B4B4B; white-space:nowrap;">
							אחדות
						</div>
						<div style=" position: absolute; top: 148%; left: 12.5%; padding: 20px; border-radius: 15px; font-size: 28px; color: #4B4B4B; white-space:nowrap;">
							עשרות
						</div>
						<div style=" position: absolute; top: 148%; left: -1%; padding: 20px; border-radius: 15px; font-size: 28px; color: #4B4B4B; white-space:nowrap;">
							מאות
						</div>
					</div>
					<div class="delayed-p" data-fragment-index="5" style="position: absolute; top: 105%; left: 40%; animation-delay:11s;">
						<div style="padding: 20px; border-radius: 15px; font-size: 28px; color: #4B4B4B;">
							הנקודה העשרונית
						</div>
						<!-- highlight/circle of decimal dot-->
						<div id="square-frame-2" class="circle-draw" data-delay="11000" style="position: absolute; top: 267%; left: 26.5%; border-radius: 55px;
							 width: 108px; height: 108px; border: 5px solid #cceeff; box-shadow: 0 0 10px 4px rgba(204, 238, 255, 0.8); background-color: #cceeff "> </div>
					</div>

					<div class="delayed-p" data-fragment-index="6" style="animation-delay:14s;">
						<div style="position: absolute; top: 105%; left: 75%; padding: 20px; border-radius: 15px; font-size: 28px; color: #4B4B4B; white-space: nowrap;">
							החלק השברי
						</div>
						<div style=" position: absolute; top: 148%; left: 79%; padding: 20px; border-radius: 15px; font-size: 28px; color: #4B4B4B; white-space:nowrap;">
							עשיריות
						</div>
						<div style=" position: absolute; top: 148%; left: 66%; padding: 20px; border-radius: 15px; font-size: 28px; color: #4B4B4B; white-space:nowrap;">
							מאיות
						</div>
						<div style=" position: absolute; top: 148%; left: 93%; padding: 20px; border-radius: 15px; font-size: 28px; color: #4B4B4B; white-space:nowrap;">
							אלפיות
						</div>
					</div>

					<!-- Side Text on the left -->
					<div class="delayed-p" data-fragment-index="4" style="position: absolute; top: 115%; left: -30%; animation-delay:8s;">
						<div style="background-color: #E7FFE7; padding: 20px; border-radius: 15px; font-size: 30px; color: #4B4B4B;">
							שהוא כולל את<br>המספרים מצד<br>שמאל של הנקודה<br>העשרונית
						</div>
					</div>
					<!-- sqaure frame: will animate via JS -->
					<div id="square-frame-1" class="circle-draw" data-delay="8000"
						 style="position: absolute; top: 97.5%; left: -3.5%; border: 5px solid #E7FFE7; box-shadow: 0 0 25px 10px rgba(231, 255, 231, 0.8);"></div>

					<!-- Side Text on the right -->
					<div class="delayed-p" data-fragment-index="7" style="position: absolute; top: 115%; right: -32%; animation-delay:17s;">
						<div style="background-color: #FFE7E7; padding: 20px; border-radius: 15px; font-size: 30px; color: #4B4B4B;">
							שהוא כולל את<br>המספרים מצד<br>ימין של הנקודה<br>העשרונית
						</div>
						<!-- draw a squared frame right side-->
						<div id="square-frame-3" class="circle-draw" data-delay="17000" style="position: absolute; top: -39.5%; left: -189.5%;
							 border: 5px solid #f5cccc; box-shadow: 0 0 20px 8px rgba(245, 204, 204, 0.7); "> </div>
					</div>
				</div>
			</section>



			<!-- Slide 8 index=7 -->
			<section id="start-game">
				<p> changing the content to the num-house, similar to the previous slide but with the number: נפרק את המספר 0.3</p>
			</section><!-- Slide 9 index=8 -->
			<!-- Slide 10 index=9 -->
			<!-- Slide 11 index=10 -->
			<!-- Slide 12 index=11 -->
			<!-- Slide 13 index=12 -->
			<!-- Slide 14 index=13-->
		</div>

	</div>





	<!-- Core and Plugins -->
	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,
			backgroundTransition: 'slide',
			transitionSpeed: 'slow',
			controls: false,
			fragments: true,

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});
		//Method to animate visual effect
		Reveal.addEventListener('slidechanged', function (event) {
			console.log("Fragment shown!", event.fragment);  //debug
			const currentSlide = event.currentSlide;
			const boxes = currentSlide.querySelectorAll('.circle-draw');
			boxes.forEach(box => {
			//Reset animation
			box.style.animation = 'none';
			box.style.opacity = '0';
			void box.offsetWidth;

			//Read custom delay from data-delaty attribute
			const delay = parseInt(box.getAttribute('data-delay')) ||100;

			 setTimeout(() => {
                box.style.animation = 'drawboxframe 1s ease-out forwards';
            }, delay);
        });
		});

        //function to play Audio Elements
        Reveal.addEventListener('slidechanged', function (event) {
            const slideId = event.currentSlide.id;
            console.log("Slide shown:", slideId);  // debug

            //incorrect Answer Audio
            if (slideId === 's5') {
                const audio = document.getElementById('wrong-sound');
                if (audio) {
                    audio.currentTime = 0;
                    audio.play().catch(err => console.log("Playback failed:", err));
                }
			}
			//correct Answer Audio
            else if (slideId === 's4') {
                const audio = document.getElementById('correct-sound');
                if (audio) {
                    audio.currentTime = 0;
                    audio.play().catch(e => console.warn("Audio failed:", e));
                }
            }
		});

		//function that play "tap-sound" when clicking a button and then forwards the user to the targetSlideIndex
        function playTapAndGo(slideIndex, soundId = 'tap-sound') {
            const sound = document.getElementById(soundId);
            if (sound) {
                sound.currentTime = 0;
                sound.play().catch(e => console.warn("Sound failed:", e));
            }

            setTimeout(() => {
                Reveal.slide(slideIndex);
            }, 300);
        }

		//Blocking nav-buttons from display on first slide:
		function updateNavVisibility() {
			 const nav = document.getElementById('nav-buttons');
			 const timer_icon = document.getElementById('game-timer');
			 const current = Reveal.getIndices();
			 if (current.h === 0) {
				 nav.style.display = 'none'; // Hide on first slide
				 timer_icon.style.display = 'none'; // Hide on first slide
			}	
			 else {
				 nav.style.display = 'block'; // Show on others
				 timer_icon.style.display = 'block'; // Show on others
			 }
		}

		// trigger this every time the slide changes
		 Reveal.addEventListener('slidechanged', updateNavVisibility);

		// also trigger it once when the presentation starts
		 Reveal.addEventListener('ready', updateNavVisibility);


		//Navigation arrows functions:
		function goNext() {
		 Reveal.next(); // Go to the next slide
		}

	    function goPrev() {
		 Reveal.prev(); // Go to the previous slide
		}

		//Time calculating and Display methods:
		let gameTimerInterval = null;
		let elapsedSeconds = 0;
		let gameStarted = false; // To ensure it runs only once

		// Start timer (run this once at the start of your game)
		function startGameTimer() {
			if (gameTimerInterval || gameStarted ) return; // Prevent multiple intervals!
			 
		  gameStarted = true;

		  gameTimerInterval = setInterval(() => {
		   if (!isPaused) {
			  elapsedSeconds++;
			  updateTimerDisplay();
			 }
			}, 1000); // Count up every second
		}

		function updateTimerDisplay() {
			 const minutes = Math.floor(elapsedSeconds / 60);     // Get full minutes
			 const seconds = elapsedSeconds % 60;                 // Remaining seconds

		// Format as "MM:SS" with leading zeros if needed
			document.getElementById('game-timer').textContent =
		    String(minutes).padStart(2, '0') + ':' + String(seconds).padStart(2, '0');
		}

	    // Called by pause button
		let isPaused = false;
		function togglePause() {
			 isPaused = !isPaused;
			 console.log(isPaused ? '⏸️ Game paused' : '▶️ Game resumed');

			const pauseBtn= document.getElementById('pause-btn');
			if(isPaused) {
				pauseBtn.classList.add('playing');  //switch to play icon ▶️
			}
			else{
				pauseBtn.classList.remove('playing');  //switch back to pause icon ⏸️
			}
		}
	
	    //Listen for loading the presentation
		Reveal.on('ready', (event) => {
			const slideId = event.currentSlide.id;
			 if (slideId === 'start-game') {
				 showGameUI();
				 startGameTimer();
				 gameStarted= true;   //toggle flag to true so we know it's activated
			 }
			 else{
				 hideGameUI();
			 }
			});

		//Listen for slide changing
		Reveal.on('slidechanged', (event) => {
			const slideId = event.currentSlide.id;
			if (slideId === 'start-game') {
			   //if the game hasn’t already started-->gameStarted=false. we still haven't landed on 'start-game' slide
				if (!gameStarted) {
				 showGameUI();
				 startGameTimer();
				 gameStarted= true;
	    	 }
		   }
			//the game already started--> gameStarted=true
			 else if (gameStarted) {
				 showGameUI(); // keep showing after 'start-game' slide
			 }
		    else {
			 hideGameUI(); //hide before 'start-game' slide
		    }
		});
		// Utility functions:
		 // Show pause and timer
	   	 function showGameUI(){
			const timer= document.getElementById('game-timer');
		    const pause= document.querySelector('.pause-button');
				timer.style.display= 'block';
				pause.style.display= 'block';

			// Delay to allow the elements to render before fading
			 setTimeout(() => {
				  timer.style.opacity = '1';
				  pause.style.opacity = '1'; }, 50); // Tiny delay

			// Start timer after fade-in is complete (1s later)
			setTimeout(() => {
			     startGameTimer();  }, 1000);
		 }
			

		 // Hide pause buttn adn timer 
		 function hideGameUI(){
			const timer= document.getElementById('game-timer');
			const pause= document.querySelector('.pause-button');
					timer.style.display= 'none';
					pause.style.display= 'none';
		 }


	</script>

	<!-- Timer element on top left corner-->
	 <div id="game-timer"
		  style=" position: fixed; top: 83px; left: 20px; width: 60px; height:25px;
				font-size: 24px; text-align: left; color: white; background: rgba(0,0,0,0.4);
				border-radius: 12px;
				background-color: rgba(0, 0, 0, 0.3); /* optional translucent background */
				box-shadow: 0 0 12px 4px rgba(192, 132, 214, 0.4); /* soft glow */ 
				padding: 8px 16px;
				border-radius: 10px;
				z-index: 1000;">00:00
	</div>

     <div id="nav-buttons">
         <!-- Navigation Buttons (global) -->
         <a onclick="goPrev()" class="nav-arrow prev-arrow"></a>
         <a onclick="goNext()" class="nav-arrow next-arrow"></a>

         <!-- Pause Button -->
         <a onclick="togglePause()" class="nav-arrow pause-button" id="pause-btn"></a>

         <!-- Audio elements -->
         <audio id="tap-sound" src="Math-Project/audio/POP-(clicking).wav"></audio>
         <audio id="correct-sound" src="Math-Project/audio/Correct-answer.wav"></audio>
         <audio id="wrong-sound" src="Math-Project/audio/Try-Again-wrong.wav"></audio>
     </div>
</body>
</html>
